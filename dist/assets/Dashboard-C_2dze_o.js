import{r as n,j as h,a as Z}from"./index-Dvb9ohnK.js";import{h as tt,g as et,s as ot,P as rt,u as st,_ as at,e as V,l as nt,m as it,a as P}from"./Paper-DbN--PaP.js";import{u as q}from"./useMediaQuery-DoKZ4pN-.js";function lt(i){return tt("MuiCard",i)}et("MuiCard",["root"]);const ct=["className","raised"],ht=i=>{const{classes:s}=i;return it({root:["root"]},lt,s)},dt=ot(rt,{name:"MuiCard",slot:"Root",overridesResolver:(i,s)=>s.root})(()=>({overflow:"hidden"})),I=n.forwardRef(function(s,t){const r=st({props:s,name:"MuiCard"}),{className:o,raised:e=!1}=r,a=at(r,ct),l=V({},r,{raised:e}),d=ht(l);return h.jsx(dt,V({className:nt(d.root,o),elevation:e?8:void 0,ref:t,ownerState:l},a))});function ut(i,s,t){n.useEffect(()=>{if(!document)return;const r=document.querySelector('script[src="'.concat(i,'"]'));if(r!=null&&r.dataset.loaded){s==null||s();return}const o=r||document.createElement("script");r||(o.src=i);const e=()=>{o.dataset.loaded="1",s==null||s()};return o.addEventListener("load",e),t&&o.addEventListener("error",t),r||document.head.append(o),()=>{o.removeEventListener("load",e),t&&o.removeEventListener("error",t)}},[])}function pt(i){let{chartVersion:s="current",chartPackages:t=["corechart","controls"],chartLanguage:r="en",mapsApiKey:o}=i;const[e,a]=n.useState(null),[l,d]=n.useState(!1);return ut("https://www.gstatic.com/charts/loader.js",()=>{const c=window==null?void 0:window.google;c&&(c.charts.load(s,{packages:t,language:r,mapsApiKey:o}),c.charts.setOnLoadCallback(()=>{a(c)}))},()=>{d(!0)}),[e,l]}function gt(i){let{onLoad:s,onError:t,...r}=i;const[o,e]=pt(r);return n.useEffect(()=>{o&&s&&s(o)},[o]),n.useEffect(()=>{e&&t&&t()},[e]),null}const Y={legend_toggle:!1,options:{},legendToggle:!1,getChartWrapper:()=>{},spreadSheetQueryParameters:{headers:1,gid:1},rootProps:{},chartWrapperParams:{}};let Q=0;const mt=()=>(Q+=1,"reactgooglegraph-".concat(Q)),ft=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"],Ct=async function(i,s){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((r,o)=>{const e="".concat(t.headers?"headers=".concat(t.headers):"headers=0"),a="".concat(t.query?"&tq=".concat(encodeURIComponent(t.query)):""),l="".concat(t.gid?"&gid=".concat(t.gid):""),d="".concat(t.sheet?"&sheet=".concat(t.sheet):""),c="".concat(t.access_token?"&access_token=".concat(t.access_token):""),u="".concat(e).concat(l).concat(d).concat(a).concat(c),p="".concat(s,"/gviz/tq?").concat(u);new i.visualization.Query(p).send(x=>{x.isError()?o("Error in query:  ".concat(x.getMessage()," ").concat(x.getDetailedMessage())):r(x.getDataTable())})})},{Provider:vt,Consumer:xt}=n.createContext(Y),yt=i=>{let{children:s,value:t}=i;return n.createElement(vt,{value:t},s)},J=i=>{let{render:s}=i;return n.createElement(xt,null,t=>s(t))},Dt="#CCCCCC";class wt extends n.Component{componentDidMount(){this.draw(this.props),window.addEventListener("resize",this.onResize),(this.props.legend_toggle||this.props.legendToggle)&&this.listenToLegendToggle()}componentWillUnmount(){const{google:s,googleChartWrapper:t}=this.props;window.removeEventListener("resize",this.onResize),s.visualization.events.removeAllListeners(t),t.getChartType()==="Timeline"&&t.getChart()&&t.getChart().clearChart()}componentDidUpdate(){this.draw(this.props)}render(){return null}constructor(...s){super(...s),this.state={hiddenColumns:[]},this.listenToLegendToggle=()=>{const{google:t,googleChartWrapper:r}=this.props;t.visualization.events.addListener(r,"select",()=>{const e=r.getChart().getSelection(),a=r.getDataTable();if(e.length===0||e[0].row||!a)return;const l=e[0].column,d=this.getColumnID(a,l);this.state.hiddenColumns.includes(d)?this.setState(c=>({...c,hiddenColumns:[...c.hiddenColumns.filter(u=>u!==d)]})):this.setState(c=>({...c,hiddenColumns:[...c.hiddenColumns,d]}))})},this.applyFormatters=(t,r)=>{const{google:o}=this.props;for(let e of r)switch(e.type){case"ArrowFormat":{new o.visualization.ArrowFormat(e.options).format(t,e.column);break}case"BarFormat":{new o.visualization.BarFormat(e.options).format(t,e.column);break}case"ColorFormat":{const a=new o.visualization.ColorFormat(e.options),{ranges:l}=e;for(let d of l)a.addRange(...d);a.format(t,e.column);break}case"DateFormat":{new o.visualization.DateFormat(e.options).format(t,e.column);break}case"NumberFormat":{new o.visualization.NumberFormat(e.options).format(t,e.column);break}case"PatternFormat":{new o.visualization.PatternFormat(e.options).format(t,e.column);break}}},this.getColumnID=(t,r)=>t.getColumnId(r)||t.getColumnLabel(r),this.draw=async t=>{let{data:r,diffdata:o,rows:e,columns:a,options:l,legend_toggle:d,legendToggle:c,chartType:u,formatters:p,spreadSheetUrl:C,spreadSheetQueryParameters:x}=t;const{google:f,googleChartWrapper:m}=this.props;let g,w=null;if(o){const D=f.visualization.arrayToDataTable(o.old),b=f.visualization.arrayToDataTable(o.new);w=f.visualization[u].prototype.computeDiff(D,b)}r!==null?Array.isArray(r)?g=f.visualization.arrayToDataTable(r):g=new f.visualization.DataTable(r):e&&a?g=f.visualization.arrayToDataTable([a,...e]):C?g=await Ct(f,C,x):g=f.visualization.arrayToDataTable([]);const S=g.getNumberOfColumns();for(let D=0;D<S;D+=1){const b=this.getColumnID(g,D);if(this.state.hiddenColumns.includes(b)){const A=g.getColumnLabel(D),k=g.getColumnId(D),B=g.getColumnType(D);g.removeColumn(D),g.addColumn({label:A,id:k,type:B})}}const j=m.getChart();m.getChartType()==="Timeline"&&j&&j.clearChart(),m.setChartType(u),m.setOptions(l||{}),m.setDataTable(g),m.draw(),this.props.googleChartDashboard!==null&&this.props.googleChartDashboard.draw(g),w&&(m.setDataTable(w),m.draw()),p&&(this.applyFormatters(g,p),m.setDataTable(g),m.draw()),(c===!0||d===!0)&&this.grayOutHiddenColumns({options:l})},this.grayOutHiddenColumns=t=>{let{options:r}=t;const{googleChartWrapper:o}=this.props,e=o.getDataTable();if(!e)return;const a=e.getNumberOfColumns();if(this.state.hiddenColumns.length>0===!1)return;const d=Array.from({length:a-1}).map((c,u)=>{const p=this.getColumnID(e,u+1);return this.state.hiddenColumns.includes(p)?Dt:r&&r.colors?r.colors[u]:ft[u]});o.setOptions({...r,colors:d}),o.draw()},this.onResize=()=>{const{googleChartWrapper:t}=this.props;t.draw()}}}class St extends n.Component{componentDidMount(){}componentWillUnmount(){}shouldComponentUpdate(){return!1}render(){const{google:s,googleChartWrapper:t,googleChartDashboard:r}=this.props;return n.createElement(J,{render:o=>n.createElement(wt,Object.assign({},o,{google:s,googleChartWrapper:t,googleChartDashboard:r}))})}}class Tt extends n.Component{shouldComponentUpdate(){return!1}listenToEvents(s){let{chartEvents:t,google:r,googleChartWrapper:o}=s;if(t){r.visualization.events.removeAllListeners(o);for(let a of t){var e=this;const{eventName:l,callback:d}=a;r.visualization.events.addListener(o,l,function(){for(var c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];d({chartWrapper:o,props:e.props,google:r,eventArgs:u})})}}}componentDidMount(){var s;const{google:t,googleChartWrapper:r}=this.props;this.listenToEvents({chartEvents:((s=this.propsFromContext)===null||s===void 0?void 0:s.chartEvents)||null,google:t,googleChartWrapper:r})}render(){return this.props,n.createElement(J,{render:s=>(this.propsFromContext=s,null)})}constructor(s){super(s),this.propsFromContext=null}}let $=0;class bt extends n.Component{componentDidMount(){const{options:s,google:t,chartType:r,chartWrapperParams:o,toolbarItems:e,getChartEditor:a,getChartWrapper:l}=this.props,d={chartType:r,options:s,containerId:this.getGraphID(),...o},c=new t.visualization.ChartWrapper(d);c.setOptions(s||{}),l&&l(c,t);const u=new t.visualization.Dashboard(this.dashboard_ref),p=this.addControls(c,u);e&&t.visualization.drawToolbar(this.toolbar_ref.current,e);let C=null;a&&(C=new t.visualization.ChartEditor,a({chartEditor:C,chartWrapper:c,google:t})),this.setState({googleChartEditor:C,googleChartControls:p,googleChartDashboard:u,googleChartWrapper:c,isReady:!0})}componentDidUpdate(){if(!this.state.googleChartWrapper||!this.state.googleChartDashboard||!this.state.googleChartControls)return;const{controls:s}=this.props;if(s)for(let t=0;t<s.length;t+=1){const{controlType:r,options:o,controlWrapperParams:e}=s[t];e&&"state"in e&&this.state.googleChartControls[t].control.setState(e.state),this.state.googleChartControls[t].control.setOptions(o),this.state.googleChartControls[t].control.setControlType(r)}}shouldComponentUpdate(s,t){return this.state.isReady!==t.isReady||s.controls!==this.props.controls}render(){const{width:s,height:t,options:r,style:o}=this.props,e={height:t||r&&r.height,width:s||r&&r.width,...o};return this.props.render?n.createElement("div",{ref:this.dashboard_ref,style:e},n.createElement("div",{ref:this.toolbar_ref,id:"toolbar"}),this.props.render({renderChart:this.renderChart,renderControl:this.renderControl,renderToolbar:this.renderToolBar})):n.createElement("div",{ref:this.dashboard_ref,style:e},this.renderControl(a=>{let{controlProp:l}=a;return l.controlPosition!=="bottom"}),this.renderChart(),this.renderControl(a=>{let{controlProp:l}=a;return l.controlPosition==="bottom"}),this.renderToolBar())}constructor(...s){var t;super(...s),t=this,this.state={googleChartWrapper:null,googleChartDashboard:null,googleChartControls:null,googleChartEditor:null,isReady:!1},this.graphID=null,this.dashboard_ref=n.createRef(),this.toolbar_ref=n.createRef(),this.getGraphID=()=>{const{graphID:r,graph_id:o}=this.props;let e;return!r&&!o?this.graphID?e=this.graphID:e=mt():r&&!o?e=r:o&&!r?e=o:e=r,this.graphID=e,this.graphID},this.getControlID=(r,o)=>{$+=1;let e;return typeof r>"u"?e="googlechart-control-".concat(o,"-").concat($):e=r,e},this.addControls=(r,o)=>{const{google:e,controls:a}=this.props,l=a?a.map((c,u)=>{const{controlID:p,controlType:C,options:x,controlWrapperParams:f}=c,m=this.getControlID(p,u);return{controlProp:c,control:new e.visualization.ControlWrapper({containerId:m,controlType:C,options:x,...f})}}):null;if(!l)return null;o.bind(l.map(c=>{let{control:u}=c;return u}),r);for(let c of l){const{control:u,controlProp:p}=c,{controlEvents:C=[]}=p;for(let x of C){var d=this;const{callback:f,eventName:m}=x;e.visualization.events.removeListener(u,m,f),e.visualization.events.addListener(u,m,function(){for(var g=arguments.length,w=new Array(g),S=0;S<g;S++)w[S]=arguments[S];f({chartWrapper:r,controlWrapper:u,props:d.props,google:e,eventArgs:w})})}}return l},this.renderChart=()=>{const{width:r,height:o,options:e,style:a,className:l,rootProps:d,google:c}=this.props,u={height:o||e&&e.height,width:r||e&&e.width,...a};return n.createElement("div",Object.assign({id:this.getGraphID(),style:u,className:l},d),this.state.isReady&&this.state.googleChartWrapper!==null?n.createElement(n.Fragment,null,n.createElement(St,{googleChartWrapper:this.state.googleChartWrapper,google:c,googleChartDashboard:this.state.googleChartDashboard}),n.createElement(Tt,{googleChartWrapper:this.state.googleChartWrapper,google:c})):null)},this.renderControl=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o=>!0;return t.state.isReady&&t.state.googleChartControls!==null?n.createElement(n.Fragment,null,t.state.googleChartControls.filter(o=>{let{controlProp:e,control:a}=o;return r({control:a,controlProp:e})}).map(o=>{let{control:e,controlProp:a}=o;return n.createElement("div",{key:e.getContainerId(),id:e.getContainerId()})})):null},this.renderToolBar=()=>this.props.toolbarItems?n.createElement("div",{ref:this.toolbar_ref}):null}}class G extends n.Component{render(){const{chartLanguage:s,chartPackages:t,chartVersion:r,mapsApiKey:o,loader:e,errorElement:a}=this.props;return n.createElement(yt,{value:this.props},this.state.loadingStatus==="ready"&&this.state.google!==null?n.createElement(bt,Object.assign({},this.props,{google:this.state.google})):this.state.loadingStatus==="errored"&&a?a:e,n.createElement(gt,{chartLanguage:s,chartPackages:t,chartVersion:r,mapsApiKey:o,onLoad:this.onLoad,onError:this.onError}))}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}isFullyLoaded(s){const{controls:t,toolbarItems:r,getChartEditor:o}=this.props;return s&&s.visualization&&s.visualization.ChartWrapper&&s.visualization.Dashboard&&(!t||s.visualization.ChartWrapper)&&(!o||s.visualization.ChartEditor)&&(!r||s.visualization.drawToolbar)}constructor(...s){super(...s),this._isMounted=!1,this.state={loadingStatus:"loading",google:null},this.onLoad=t=>{if(this.props.onLoad&&this.props.onLoad(t),this.isFullyLoaded(t))this.onSuccess(t);else{const r=setInterval(()=>{const o=window.google;this._isMounted?o&&this.isFullyLoaded(o)&&(clearInterval(r),this.onSuccess(o)):clearInterval(r)},1e3)}},this.onSuccess=t=>{this.setState({loadingStatus:"ready",google:t})},this.onError=()=>{this.setState({loadingStatus:"errored"})}}}G.defaultProps=Y;var K;(function(i){i.annotation="annotation",i.annotationText="annotationText",i.certainty="certainty",i.emphasis="emphasis",i.interval="interval",i.scope="scope",i.style="style",i.tooltip="tooltip",i.domain="domain"})(K||(K={}));const Et=()=>{const[i,s]=n.useState([["Grade","Count"]]);n.useEffect(()=>{P.get("http://localhost:8000/employeesData").then(o=>{const e=o.data;t(e)}).catch(o=>{console.error("Error fetching employee data:",o)})},[]);const t=o=>{const e=new Map;o.forEach(l=>{const d=l.Grade,c=e.get(d)||0;e.set(d,c+1)});const a=[["Grade","Count"]];e.forEach((l,d)=>{a.push([d,l])}),s(a)},r={title:"Team Members by Grade",titleTextStyle:{fontSize:20,bold:!0},legend:{position:"none"},hAxis:{title:"Grade"},vAxis:{title:"Count",minValue:0,gridlines:{count:5}},bar:{groupWidth:"75%"},chartArea:{width:"70%",height:"70%"}};return h.jsx("div",{className:"bar-graph-container",style:{boxShadow:"5px 5px 22px 8px rgba(0, 0, 0, 0.1)"},children:h.jsx(G,{chartType:"ColumnChart",width:"100%",height:"400px",data:i,options:r})})},zt=()=>{const{userRole:i,userName:s,UserEmpId:t}=Z(),r=q("(max-width:600px)"),o=q("(max-width:960px)"),e=q("(max-width:2000px)"),[a,l]=n.useState([]),[d,c]=n.useState(0),[u,p]=n.useState(0),[C,x]=n.useState(0),[f,m]=n.useState(0),[g,w]=n.useState(0),[S,j]=n.useState(0);console.log("userName:",s),console.log("UserEmpId:",t),n.useEffect(()=>{D(),A()},[]);const D=()=>{P.get("http://localhost:8000/employeesData").then(v=>{l(v.data),c(v.data.length),b(v.data)}).catch(v=>{console.error("Error fetching data: ",v)})},b=v=>{const y=new Set(v.map(E=>E.Project));p(y.size)},A=()=>{P.get("http://localhost:8000/trainingData").then(v=>{k(v.data)}).catch(v=>{console.error("Error fetching training data: ",v)})},k=v=>{const y=new Date;y.setHours(0,0,0,0);const E=new Date(y);E.setDate(y.getDate()-y.getDay());const F=new Date(y);F.setDate(y.getDate()+(6-y.getDay())),F.setHours(23,59,59,999);let L=0,M=0,N=0,U=0;v.forEach(z=>{const O=new Date(z.PlannedDate),R=new Date(z.StartDate),X=new Date(z.EndDate),T=z.TrainingTitle,H=z.Name.split("(")[0].trim(),_=H===s.trim();console.log("Name Part:",H),console.log("Is User Training:",_),(R<=y&&y<=X||O.toDateString()===y.toDateString())&&(i==="viewer"&&_?N+=T.includes(",")?T.split(",").length:1:i!=="viewer"&&(L+=T.includes(",")?T.split(",").length:1)),(R>=E&&R<=F||O>=E&&O<=F)&&(i==="viewer"&&_?U+=T.includes(",")?T.split(",").length:1:i!=="viewer"&&(M+=T.includes(",")?T.split(",").length:1))}),console.log("Trainings Today:",L,"Trainings This Week:",M),console.log("Viewer Trainings Today:",N,"Viewer Trainings This Week:",U),x(L),m(M),w(N),j(U)},W=(()=>{if(r)return{width:"80%",height:"15vh"};if(o)return{width:"45%",height:"19vh"};if(e)return{width:"20vw",height:"200px"}})();return h.jsx("div",{className:"px-4 py-4 mx-6 my-10 flex justify-center",children:h.jsxs("div",{className:"flex flex-wrap gap-4 text-3xl justify-center",children:[h.jsx(I,{sx:{...W,backgroundColor:"#3DB5A4",borderRadius:"20px",boxShadow:"1px 1px 10px 0.00001px gray",color:"white"},children:h.jsxs("div",{className:"flex flex-col gap-3 items-center justify-center h-full",children:[h.jsx("div",{style:{fontSize:"25px"},children:"Team"}),h.jsx("div",{style:{fontSize:"22px"},children:d}),h.jsx("div",{style:{fontSize:"25px"},children:"Employee"})]})}),h.jsx(I,{sx:{...W,backgroundColor:"#3297E4",borderRadius:"20px",boxShadow:"1px 1px 10px 0.00001px gray",color:"white"},children:h.jsxs("div",{className:"flex flex-col gap-3 items-center justify-center h-full",children:[h.jsx("div",{style:{fontSize:"25px"},children:"Team"}),h.jsx("div",{style:{fontSize:"22px"},children:u}),h.jsx("div",{style:{fontSize:"25px"},children:"Projects"})]})}),h.jsx(I,{sx:{...W,backgroundColor:"#A04EDE",borderRadius:"20px",boxShadow:"1px 1px 10px 0.00001px gray",color:"white"},children:h.jsxs("div",{className:"flex flex-col gap-3 items-center justify-center h-full",children:[h.jsx("div",{style:{fontSize:"25px"},children:"Today"}),h.jsx("div",{style:{fontSize:"22px"},children:"0 / 0 / 0"}),h.jsx("div",{style:{fontSize:"25px"},children:"WFO/WFH/Leave"})]})}),h.jsx(I,{sx:{...W,backgroundColor:"#E58953",borderRadius:"20px",boxShadow:"1px 1px 10px 0.1px gray",color:"white"},children:h.jsxs("div",{className:"flex flex-col gap-3 items-center justify-center h-full",children:[h.jsx("div",{style:{fontSize:"25px"},children:"Training"}),h.jsx("div",{style:{fontSize:"22px"},children:i==="viewer"?`${g}/${S}`:`${C} / ${f}`}),h.jsx("div",{style:{fontSize:"25px"},children:"Today/Week"})]})})]})})},jt=()=>{const[i,s]=n.useState([["Skill","Count"]]);n.useEffect(()=>{P.get("http://localhost:8000/employeesData").then(o=>{const e=o.data;t(e)}).catch(o=>{console.error("Error fetching employee data:",o)})},[]);const t=o=>{const e=new Map;o.forEach(l=>{(l.Skills?l.Skills.split(","):[]).forEach(c=>{const u=c.trim();if(u!==""){const p=e.get(u)||0;e.set(u,p+1)}})});const a=[["Skill","Count"]];e.forEach((l,d)=>{a.push([d,l])}),s(a)},r={title:"Team Competency",colors:["#199555","#F1C617","#0082FF","#93C747"],titleTextStyle:{fontSize:20,bold:!0},legend:{position:"left",textStyle:{fontSize:16}},pieSliceTextStyle:{fontSize:18},chartArea:{left:50,top:50,right:20,width:"100%",height:"95%"}};return h.jsx("div",{className:"pie-chart-container",children:h.jsx(G,{chartType:"PieChart",data:i,options:r,width:"100%",height:"400px"})})},Pt=()=>h.jsxs("div",{className:"overflow-x-hidden",children:[" ",h.jsx("div",{children:h.jsx(zt,{})}),h.jsxs("div",{className:"flex justify-around py-8",children:[h.jsx("div",{children:h.jsx(Et,{})}),h.jsx("div",{children:h.jsx(jt,{})})]})]});export{Pt as default};
